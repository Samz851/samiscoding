function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Modal=function(a){var e="modal",r="bs.modal",i="."+r,t=a.fn[e],n={backdrop:!0,keyboard:!0,focus:!0,show:!0},o={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},d={HIDE:"hide"+i,HIDDEN:"hidden"+i,SHOW:"show"+i,SHOWN:"shown"+i,FOCUSIN:"focusin"+i,RESIZE:"resize"+i,CLICK_DISMISS:"click.dismiss"+i,KEYDOWN_DISMISS:"keydown.dismiss"+i,MOUSEUP_DISMISS:"mouseup.dismiss"+i,MOUSEDOWN_DISMISS:"mousedown.dismiss"+i,CLICK_DATA_API:"click"+i+".data-api"},l="modal-scrollbar-measure",h="modal-backdrop",c="modal-open",_="fade",u="show",g=".modal-dialog",s='[data-toggle="modal"]',f='[data-dismiss="modal"]',m=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",p=".sticky-top",S=".navbar-toggler",v=function(){function s(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=a(t).find(g)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}var t=s.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isTransitioning&&!this._isShown){Util.supportsTransitionEnd()&&a(this._element).hasClass(_)&&(this._isTransitioning=!0);var i=a.Event(d.SHOW,{relatedTarget:t});a(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),a(document.body).addClass(c),this._setEscapeEvent(),this._setResizeEvent(),a(this._element).on(d.CLICK_DISMISS,f,function(t){return e.hide(t)}),a(this._dialog).on(d.MOUSEDOWN_DISMISS,function(){a(e._element).one(d.MOUSEUP_DISMISS,function(t){a(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),!this._isTransitioning&&this._isShown){var i=a.Event(d.HIDE);if(a(this._element).trigger(i),this._isShown&&!i.isDefaultPrevented()){this._isShown=!1;var n=Util.supportsTransitionEnd()&&a(this._element).hasClass(_);n&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),a(document).off(d.FOCUSIN),a(this._element).removeClass(u),a(this._element).off(d.CLICK_DISMISS),a(this._dialog).off(d.MOUSEDOWN_DISMISS),n?a(this._element).one(Util.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(300):this._hideModal()}}},t.dispose=function(){a.removeData(this._element,r),a(window,document,this._element,this._backdrop).off(i),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=_extends({},n,t),Util.typeCheckConfig(e,t,o),t},t._showElement=function(t){var e=this,i=Util.supportsTransitionEnd()&&a(this._element).hasClass(_);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&Util.reflow(this._element),a(this._element).addClass(u),this._config.focus&&this._enforceFocus();function n(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,a(e._element).trigger(s)}var s=a.Event(d.SHOWN,{relatedTarget:t});i?a(this._dialog).one(Util.TRANSITION_END,n).emulateTransitionEnd(300):n()},t._enforceFocus=function(){var e=this;a(document).off(d.FOCUSIN).on(d.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===a(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?a(this._element).on(d.KEYDOWN_DISMISS,function(t){27===t.which&&(t.preventDefault(),e.hide())}):this._isShown||a(this._element).off(d.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?a(window).on(d.RESIZE,function(t){return e.handleUpdate(t)}):a(window).off(d.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._isTransitioning=!1,this._showBackdrop(function(){a(document.body).removeClass(c),t._resetAdjustments(),t._resetScrollbar(),a(t._element).trigger(d.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(a(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,i=a(this._element).hasClass(_)?_:"";if(this._isShown&&this._config.backdrop){var n=Util.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=h,i&&a(this._backdrop).addClass(i),a(this._backdrop).appendTo(document.body),a(this._element).on(d.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===e._config.backdrop?e._element.focus():e.hide())}),n&&Util.reflow(this._backdrop),a(this._backdrop).addClass(u),!t)return;if(!n)return void t();a(this._backdrop).one(Util.TRANSITION_END,t).emulateTransitionEnd(150)}else if(!this._isShown&&this._backdrop){a(this._backdrop).removeClass(u);function s(){e._removeBackdrop(),t&&t()}Util.supportsTransitionEnd()&&a(this._element).hasClass(_)?a(this._backdrop).one(Util.TRANSITION_END,s).emulateTransitionEnd(150):s()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var s=this;if(this._isBodyOverflowing){a(m).each(function(t,e){var i=a(e)[0].style.paddingRight,n=a(e).css("padding-right");a(e).data("padding-right",i).css("padding-right",parseFloat(n)+s._scrollbarWidth+"px")}),a(p).each(function(t,e){var i=a(e)[0].style.marginRight,n=a(e).css("margin-right");a(e).data("margin-right",i).css("margin-right",parseFloat(n)-s._scrollbarWidth+"px")}),a(S).each(function(t,e){var i=a(e)[0].style.marginRight,n=a(e).css("margin-right");a(e).data("margin-right",i).css("margin-right",parseFloat(n)+s._scrollbarWidth+"px")});var t=document.body.style.paddingRight,e=a("body").css("padding-right");a("body").data("padding-right",t).css("padding-right",parseFloat(e)+this._scrollbarWidth+"px")}},t._resetScrollbar=function(){a(m).each(function(t,e){var i=a(e).data("padding-right");void 0!==i&&a(e).css("padding-right",i).removeData("padding-right")}),a(p+", "+S).each(function(t,e){var i=a(e).data("margin-right");void 0!==i&&a(e).css("margin-right",i).removeData("margin-right")});var t=a("body").data("padding-right");void 0!==t&&a("body").css("padding-right",t).removeData("padding-right")},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=l,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},s._jQueryInterface=function(i,n){return this.each(function(){var t=a(this).data(r),e=_extends({},s.Default,a(this).data(),"object"==typeof i&&i);if(t||(t=new s(this,e),a(this).data(r,t)),"string"==typeof i){if(void 0===t[i])throw new TypeError('No method named "'+i+'"');t[i](n)}else e.show&&t.show(n)})},_createClass(s,null,[{key:"VERSION",get:function(){return"4.0.0"}},{key:"Default",get:function(){return n}}]),s}();return a(document).on(d.CLICK_DATA_API,s,function(t){var e,i=this,n=Util.getSelectorFromElement(this);n&&(e=a(n)[0]);var s=a(e).data(r)?"toggle":_extends({},a(e).data(),a(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var o=a(e).one(d.SHOW,function(t){t.isDefaultPrevented()||o.one(d.HIDDEN,function(){a(i).is(":visible")&&i.focus()})});v._jQueryInterface.call(a(e),s,this)}),a.fn[e]=v._jQueryInterface,a.fn[e].Constructor=v,a.fn[e].noConflict=function(){return a.fn[e]=t,v._jQueryInterface},v}($);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLmpzIl0sIm5hbWVzIjpbIl9leHRlbmRzIiwiT2JqZWN0IiwiYXNzaWduIiwidGFyZ2V0IiwiaSIsImFyZ3VtZW50cyIsImxlbmd0aCIsInNvdXJjZSIsImtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImFwcGx5IiwidGhpcyIsIl9kZWZpbmVQcm9wZXJ0aWVzIiwicHJvcHMiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiZGVmaW5lUHJvcGVydHkiLCJfY3JlYXRlQ2xhc3MiLCJDb25zdHJ1Y3RvciIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsIk1vZGFsIiwiJCIsIk5BTUUiLCJEQVRBX0tFWSIsIkVWRU5UX0tFWSIsIkpRVUVSWV9OT19DT05GTElDVCIsImZuIiwiRGVmYXVsdCIsImJhY2tkcm9wIiwia2V5Ym9hcmQiLCJmb2N1cyIsInNob3ciLCJEZWZhdWx0VHlwZSIsIkV2ZW50IiwiSElERSIsIkhJRERFTiIsIlNIT1ciLCJTSE9XTiIsIkZPQ1VTSU4iLCJSRVNJWkUiLCJDTElDS19ESVNNSVNTIiwiS0VZRE9XTl9ESVNNSVNTIiwiTU9VU0VVUF9ESVNNSVNTIiwiTU9VU0VET1dOX0RJU01JU1MiLCJDTElDS19EQVRBX0FQSSIsIkNsYXNzTmFtZSIsIlNlbGVjdG9yIiwiZWxlbWVudCIsImNvbmZpZyIsIl9jb25maWciLCJfZ2V0Q29uZmlnIiwiX2VsZW1lbnQiLCJfZGlhbG9nIiwiZmluZCIsIl9iYWNrZHJvcCIsIl9pc1Nob3duIiwiX2lzQm9keU92ZXJmbG93aW5nIiwiX2lnbm9yZUJhY2tkcm9wQ2xpY2siLCJfb3JpZ2luYWxCb2R5UGFkZGluZyIsIl9zY3JvbGxiYXJXaWR0aCIsIl9wcm90byIsInRvZ2dsZSIsInJlbGF0ZWRUYXJnZXQiLCJoaWRlIiwiX3RoaXMiLCJfaXNUcmFuc2l0aW9uaW5nIiwiVXRpbCIsInN1cHBvcnRzVHJhbnNpdGlvbkVuZCIsImhhc0NsYXNzIiwic2hvd0V2ZW50IiwidHJpZ2dlciIsImlzRGVmYXVsdFByZXZlbnRlZCIsIl9jaGVja1Njcm9sbGJhciIsIl9zZXRTY3JvbGxiYXIiLCJfYWRqdXN0RGlhbG9nIiwiZG9jdW1lbnQiLCJib2R5IiwiYWRkQ2xhc3MiLCJfc2V0RXNjYXBlRXZlbnQiLCJfc2V0UmVzaXplRXZlbnQiLCJvbiIsImV2ZW50Iiwib25lIiwiaXMiLCJfc2hvd0JhY2tkcm9wIiwiX3Nob3dFbGVtZW50IiwiX3RoaXMyIiwicHJldmVudERlZmF1bHQiLCJoaWRlRXZlbnQiLCJ0cmFuc2l0aW9uIiwib2ZmIiwicmVtb3ZlQ2xhc3MiLCJUUkFOU0lUSU9OX0VORCIsIl9oaWRlTW9kYWwiLCJlbXVsYXRlVHJhbnNpdGlvbkVuZCIsImRpc3Bvc2UiLCJyZW1vdmVEYXRhIiwid2luZG93IiwiaGFuZGxlVXBkYXRlIiwidHlwZUNoZWNrQ29uZmlnIiwiX3RoaXMzIiwicGFyZW50Tm9kZSIsIm5vZGVUeXBlIiwiTm9kZSIsIkVMRU1FTlRfTk9ERSIsImFwcGVuZENoaWxkIiwic3R5bGUiLCJkaXNwbGF5IiwicmVtb3ZlQXR0cmlidXRlIiwic2Nyb2xsVG9wIiwicmVmbG93IiwiX2VuZm9yY2VGb2N1cyIsInRyYW5zaXRpb25Db21wbGV0ZSIsInNob3duRXZlbnQiLCJfdGhpczQiLCJoYXMiLCJfdGhpczUiLCJ3aGljaCIsIl90aGlzNiIsIl90aGlzNyIsInNldEF0dHJpYnV0ZSIsIl9yZXNldEFkanVzdG1lbnRzIiwiX3Jlc2V0U2Nyb2xsYmFyIiwiX3JlbW92ZUJhY2tkcm9wIiwicmVtb3ZlIiwiY2FsbGJhY2siLCJfdGhpczgiLCJhbmltYXRlIiwiZG9BbmltYXRlIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsImFwcGVuZFRvIiwiY3VycmVudFRhcmdldCIsImNhbGxiYWNrUmVtb3ZlIiwiaXNNb2RhbE92ZXJmbG93aW5nIiwic2Nyb2xsSGVpZ2h0IiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwicGFkZGluZ0xlZnQiLCJwYWRkaW5nUmlnaHQiLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwibGVmdCIsInJpZ2h0IiwiaW5uZXJXaWR0aCIsIl9nZXRTY3JvbGxiYXJXaWR0aCIsIl90aGlzOSIsImVhY2giLCJpbmRleCIsImFjdHVhbFBhZGRpbmciLCJjYWxjdWxhdGVkUGFkZGluZyIsImNzcyIsImRhdGEiLCJwYXJzZUZsb2F0IiwiYWN0dWFsTWFyZ2luIiwibWFyZ2luUmlnaHQiLCJjYWxjdWxhdGVkTWFyZ2luIiwicGFkZGluZyIsIm1hcmdpbiIsInNjcm9sbERpdiIsInNjcm9sbGJhcldpZHRoIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwiX2pRdWVyeUludGVyZmFjZSIsIlR5cGVFcnJvciIsImdldCIsIl90aGlzMTAiLCJzZWxlY3RvciIsImdldFNlbGVjdG9yRnJvbUVsZW1lbnQiLCJ0YWdOYW1lIiwiJHRhcmdldCIsIm5vQ29uZmxpY3QiXSwibWFwcGluZ3MiOiJBQUFBLFNBQVNBLFdBQTJRLE9BQTlQQSxTQUFXQyxPQUFPQyxRQUFVLFNBQVVDLEdBQVUsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUlDLFVBQVVDLE9BQVFGLElBQUssQ0FBRSxJQUFJRyxFQUFTRixVQUFVRCxHQUFJLElBQUssSUFBSUksS0FBT0QsRUFBY04sT0FBT1EsVUFBVUMsZUFBZUMsS0FBS0osRUFBUUMsS0FBUUwsRUFBT0ssR0FBT0QsRUFBT0MsSUFBWSxPQUFPTCxJQUEyQlMsTUFBTUMsS0FBTVIsV0FFaFQsU0FBU1Msa0JBQWtCWCxFQUFRWSxHQUFTLElBQUssSUFBSVgsRUFBSSxFQUFHQSxFQUFJVyxFQUFNVCxPQUFRRixJQUFLLENBQUUsSUFBSVksRUFBYUQsRUFBTVgsR0FBSVksRUFBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsVUFBV0YsSUFBWUEsRUFBV0csVUFBVyxHQUFNbEIsT0FBT21CLGVBQWVqQixFQUFRYSxFQUFXUixJ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QzVDQSxFQUFVRSxzQkFLZG9HLEVBQVF6RixJQUFJakQsRUFBTUUsT0FBUSxXQUNwQmQsRUFBRWtKLEdBQVNwRixHQUFHLGFBQ2hCb0YsRUFBUXpJLFlBS2RWLEVBQU1nSixpQkFBaUI5SixLQUFLZSxFQUFFdkIsR0FBU2tELEVBQVF4QyxRQVFqRGEsRUFBRUssR0FBR0osR0FBUUYsRUFBTWdKLGlCQUNuQi9JLEVBQUVLLEdBQUdKLEdBQU1MLFlBQWNHLEVBRXpCQyxFQUFFSyxHQUFHSixHQUFNc0osV0FBYSxXQUV0QixPQURBdkosRUFBRUssR0FBR0osR0FBUUcsRUFDTkwsRUFBTWdKLGtCQUdSaEosRUF2akJHLENBd2pCVkMiLCJmaWxlIjoibW9kYWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbi8qKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEJvb3RzdHJhcCAodjQuMC4wKTogbW9kYWwuanNcbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCAoaHR0cHM6Ly9naXRodWIuY29tL3R3YnMvYm9vdHN0cmFwL2Jsb2IvbWFzdGVyL0xJQ0VOU0UpXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICovXG52YXIgTW9kYWwgPSBmdW5jdGlvbiAoJCkge1xuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIENvbnN0YW50c1xuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICovXG4gIHZhciBOQU1FID0gJ21vZGFsJztcbiAgdmFyIFZFUlNJT04gPSAnNC4wLjAnO1xuICB2YXIgREFUQV9LRVkgPSAnYnMubW9kYWwnO1xuICB2YXIgRVZFTlRfS0VZID0gXCIuXCIgKyBEQVRBX0tFWTtcbiAgdmFyIERBVEFfQVBJX0tFWSA9ICcuZGF0YS1hcGknO1xuICB2YXIgSlFVRVJZX05PX0NPTkZMSUNUID0gJC5mbltOQU1FXTtcbiAgdmFyIFRSQU5TSVRJT05fRFVSQVRJT04gPSAzMDA7XG4gIHZhciBCQUNLRFJPUF9UUkFOU0lUSU9OX0RVUkFUSU9OID0gMTUwO1xuICB2YXIgRVNDQVBFX0tFWUNPREUgPSAyNzsgLy8gS2V5Ym9hcmRFdmVudC53aGljaCB2YWx1ZSBmb3IgRXNjYXBlIChFc2MpIGtleVxuXG4gIHZhciBEZWZhdWx0ID0ge1xuICAgIGJhY2tkcm9wOiB0cnVlLFxuICAgIGtleWJvYXJkOiB0cnVlLFxuICAgIGZvY3VzOiB0cnVlLFxuICAgIHNob3c6IHRydWVcbiAgfTtcbiAgdmFyIERlZmF1bHRUeXBlID0ge1xuICAgIGJhY2tkcm9wOiAnKGJvb2xlYW58c3RyaW5nKScsXG4gICAga2V5Ym9hcmQ6ICdib29sZWFuJyxcbiAgICBmb2N1czogJ2Jvb2xlYW4nLFxuICAgIHNob3c6ICdib29sZWFuJ1xuICB9O1xuICB2YXIgRXZlbnQgPSB7XG4gICAgSElERTogXCJoaWRlXCIgKyBFVkVOVF9LRVksXG4gICAgSElEREVOOiBcImhpZGRlblwiICsgRVZFTlRfS0VZLFxuICAgIFNIT1c6IFwic2hvd1wiICsgRVZFTlRfS0VZLFxuICAgIFNIT1dOOiBcInNob3duXCIgKyBFVkVOVF9LRVksXG4gICAgRk9DVVNJTjogXCJmb2N1c2luXCIgKyBFVkVOVF9LRVksXG4gICAgUkVTSVpFOiBcInJlc2l6ZVwiICsgRVZFTlRfS0VZLFxuICAgIENMSUNLX0RJU01JU1M6IFwiY2xpY2suZGlzbWlzc1wiICsgRVZFTlRfS0VZLFxuICAgIEtFWURPV05fRElTTUlTUzogXCJrZXlkb3duLmRpc21pc3NcIiArIEVWRU5UX0tFWSxcbiAgICBNT1VTRVVQX0RJU01JU1M6IFwibW91c2V1cC5kaXNtaXNzXCIgKyBFVkVOVF9LRVksXG4gICAgTU9VU0VET1dOX0RJU01JU1M6IFwibW91c2Vkb3duLmRpc21pc3NcIiArIEVWRU5UX0tFWSxcbiAgICBDTElDS19EQVRBX0FQSTogXCJjbGlja1wiICsgRVZFTlRfS0VZICsgREFUQV9BUElfS0VZXG4gIH07XG4gIHZhciBDbGFzc05hbWUgPSB7XG4gICAgU0NST0xMQkFSX01FQVNVUkVSOiAnbW9kYWwtc2Nyb2xsYmFyLW1lYXN1cmUnLFxuICAgIEJBQ0tEUk9QOiAnbW9kYWwtYmFja2Ryb3AnLFxuICAgIE9QRU46ICdtb2RhbC1vcGVuJyxcbiAgICBGQURFOiAnZmFkZScsXG4gICAgU0hPVzogJ3Nob3cnXG4gIH07XG4gIHZhciBTZWxlY3RvciA9IHtcbiAgICBESUFMT0c6ICcubW9kYWwtZGlhbG9nJyxcbiAgICBEQVRBX1RPR0dMRTogJ1tkYXRhLXRvZ2dsZT1cIm1vZGFsXCJdJyxcbiAgICBEQVRBX0RJU01JU1M6ICdbZGF0YS1kaXNtaXNzPVwibW9kYWxcIl0nLFxuICAgIEZJWEVEX0NPTlRFTlQ6ICcuZml4ZWQtdG9wLCAuZml4ZWQtYm90dG9tLCAuaXMtZml4ZWQsIC5zdGlja3ktdG9wJyxcbiAgICBTVElDS1lfQ09OVEVOVDogJy5zdGlja3ktdG9wJyxcbiAgICBOQVZCQVJfVE9HR0xFUjogJy5uYXZiYXItdG9nZ2xlcidcbiAgICAvKipcbiAgICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgKiBDbGFzcyBEZWZpbml0aW9uXG4gICAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICovXG5cbiAgfTtcblxuICB2YXIgTW9kYWwgPVxuICAvKiNfX1BVUkVfXyovXG4gIGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBNb2RhbChlbGVtZW50LCBjb25maWcpIHtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IHRoaXMuX2dldENvbmZpZyhjb25maWcpO1xuICAgICAgdGhpcy5fZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICB0aGlzLl9kaWFsb2cgPSAkKGVsZW1lbnQpLmZpbmQoU2VsZWN0b3IuRElBTE9HKVswXTtcbiAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzU2hvd24gPSBmYWxzZTtcbiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gZmFsc2U7XG4gICAgICB0aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID0gZmFsc2U7XG4gICAgICB0aGlzLl9vcmlnaW5hbEJvZHlQYWRkaW5nID0gMDtcbiAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gMDtcbiAgICB9IC8vIEdldHRlcnNcblxuXG4gICAgdmFyIF9wcm90byA9IE1vZGFsLnByb3RvdHlwZTtcblxuICAgIC8vIFB1YmxpY1xuICAgIF9wcm90by50b2dnbGUgPSBmdW5jdGlvbiB0b2dnbGUocmVsYXRlZFRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2lzU2hvd24gPyB0aGlzLmhpZGUoKSA6IHRoaXMuc2hvdyhyZWxhdGVkVGFyZ2V0KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLnNob3cgPSBmdW5jdGlvbiBzaG93KHJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgdGhpcy5faXNTaG93bikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpKSB7XG4gICAgICAgIHRoaXMuX2lzVHJhbnNpdGlvbmluZyA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIHZhciBzaG93RXZlbnQgPSAkLkV2ZW50KEV2ZW50LlNIT1csIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldFxuICAgICAgfSk7XG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd0V2ZW50KTtcblxuICAgICAgaWYgKHRoaXMuX2lzU2hvd24gfHwgc2hvd0V2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNTaG93biA9IHRydWU7XG5cbiAgICAgIHRoaXMuX2NoZWNrU2Nyb2xsYmFyKCk7XG5cbiAgICAgIHRoaXMuX3NldFNjcm9sbGJhcigpO1xuXG4gICAgICB0aGlzLl9hZGp1c3REaWFsb2coKTtcblxuICAgICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhDbGFzc05hbWUuT1BFTik7XG5cbiAgICAgIHRoaXMuX3NldEVzY2FwZUV2ZW50KCk7XG5cbiAgICAgIHRoaXMuX3NldFJlc2l6ZUV2ZW50KCk7XG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkub24oRXZlbnQuQ0xJQ0tfRElTTUlTUywgU2VsZWN0b3IuREFUQV9ESVNNSVNTLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuIF90aGlzLmhpZGUoZXZlbnQpO1xuICAgICAgfSk7XG4gICAgICAkKHRoaXMuX2RpYWxvZykub24oRXZlbnQuTU9VU0VET1dOX0RJU01JU1MsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChfdGhpcy5fZWxlbWVudCkub25lKEV2ZW50Lk1PVVNFVVBfRElTTUlTUywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgaWYgKCQoZXZlbnQudGFyZ2V0KS5pcyhfdGhpcy5fZWxlbWVudCkpIHtcbiAgICAgICAgICAgIF90aGlzLl9pZ25vcmVCYWNrZHJvcENsaWNrID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3Nob3dCYWNrZHJvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfdGhpcy5fc2hvd0VsZW1lbnQocmVsYXRlZFRhcmdldCk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLmhpZGUgPSBmdW5jdGlvbiBoaWRlKGV2ZW50KSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgaWYgKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9pc1RyYW5zaXRpb25pbmcgfHwgIXRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgaGlkZUV2ZW50ID0gJC5FdmVudChFdmVudC5ISURFKTtcbiAgICAgICQodGhpcy5fZWxlbWVudCkudHJpZ2dlcihoaWRlRXZlbnQpO1xuXG4gICAgICBpZiAoIXRoaXMuX2lzU2hvd24gfHwgaGlkZUV2ZW50LmlzRGVmYXVsdFByZXZlbnRlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5faXNTaG93biA9IGZhbHNlO1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICB0aGlzLl9pc1RyYW5zaXRpb25pbmcgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zZXRFc2NhcGVFdmVudCgpO1xuXG4gICAgICB0aGlzLl9zZXRSZXNpemVFdmVudCgpO1xuXG4gICAgICAkKGRvY3VtZW50KS5vZmYoRXZlbnQuRk9DVVNJTik7XG4gICAgICAkKHRoaXMuX2VsZW1lbnQpLnJlbW92ZUNsYXNzKENsYXNzTmFtZS5TSE9XKTtcbiAgICAgICQodGhpcy5fZWxlbWVudCkub2ZmKEV2ZW50LkNMSUNLX0RJU01JU1MpO1xuICAgICAgJCh0aGlzLl9kaWFsb2cpLm9mZihFdmVudC5NT1VTRURPV05fRElTTUlTUyk7XG5cbiAgICAgIGlmICh0cmFuc2l0aW9uKSB7XG4gICAgICAgICQodGhpcy5fZWxlbWVudCkub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIHJldHVybiBfdGhpczIuX2hpZGVNb2RhbChldmVudCk7XG4gICAgICAgIH0pLmVtdWxhdGVUcmFuc2l0aW9uRW5kKFRSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5faGlkZU1vZGFsKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIF9wcm90by5kaXNwb3NlID0gZnVuY3Rpb24gZGlzcG9zZSgpIHtcbiAgICAgICQucmVtb3ZlRGF0YSh0aGlzLl9lbGVtZW50LCBEQVRBX0tFWSk7XG4gICAgICAkKHdpbmRvdywgZG9jdW1lbnQsIHRoaXMuX2VsZW1lbnQsIHRoaXMuX2JhY2tkcm9wKS5vZmYoRVZFTlRfS0VZKTtcbiAgICAgIHRoaXMuX2NvbmZpZyA9IG51bGw7XG4gICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuX2RpYWxvZyA9IG51bGw7XG4gICAgICB0aGlzLl9iYWNrZHJvcCA9IG51bGw7XG4gICAgICB0aGlzLl9pc1Nob3duID0gbnVsbDtcbiAgICAgIHRoaXMuX2lzQm9keU92ZXJmbG93aW5nID0gbnVsbDtcbiAgICAgIHRoaXMuX2lnbm9yZUJhY2tkcm9wQ2xpY2sgPSBudWxsO1xuICAgICAgdGhpcy5fc2Nyb2xsYmFyV2lkdGggPSBudWxsO1xuICAgIH07XG5cbiAgICBfcHJvdG8uaGFuZGxlVXBkYXRlID0gZnVuY3Rpb24gaGFuZGxlVXBkYXRlKCkge1xuICAgICAgdGhpcy5fYWRqdXN0RGlhbG9nKCk7XG4gICAgfTsgLy8gUHJpdmF0ZVxuXG5cbiAgICBfcHJvdG8uX2dldENvbmZpZyA9IGZ1bmN0aW9uIF9nZXRDb25maWcoY29uZmlnKSB7XG4gICAgICBjb25maWcgPSBfZXh0ZW5kcyh7fSwgRGVmYXVsdCwgY29uZmlnKTtcbiAgICAgIFV0aWwudHlwZUNoZWNrQ29uZmlnKE5BTUUsIGNvbmZpZywgRGVmYXVsdFR5cGUpO1xuICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zaG93RWxlbWVudCA9IGZ1bmN0aW9uIF9zaG93RWxlbWVudChyZWxhdGVkVGFyZ2V0KSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgdmFyIHRyYW5zaXRpb24gPSBVdGlsLnN1cHBvcnRzVHJhbnNpdGlvbkVuZCgpICYmICQodGhpcy5fZWxlbWVudCkuaGFzQ2xhc3MoQ2xhc3NOYW1lLkZBREUpO1xuXG4gICAgICBpZiAoIXRoaXMuX2VsZW1lbnQucGFyZW50Tm9kZSB8fCB0aGlzLl9lbGVtZW50LnBhcmVudE5vZGUubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICAgIC8vIERvbid0IG1vdmUgbW9kYWwncyBET00gcG9zaXRpb25cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLl9lbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaGlkZGVuJyk7XG5cbiAgICAgIHRoaXMuX2VsZW1lbnQuc2Nyb2xsVG9wID0gMDtcblxuICAgICAgaWYgKHRyYW5zaXRpb24pIHtcbiAgICAgICAgVXRpbC5yZWZsb3codGhpcy5fZWxlbWVudCk7XG4gICAgICB9XG5cbiAgICAgICQodGhpcy5fZWxlbWVudCkuYWRkQ2xhc3MoQ2xhc3NOYW1lLlNIT1cpO1xuXG4gICAgICBpZiAodGhpcy5fY29uZmlnLmZvY3VzKSB7XG4gICAgICAgIHRoaXMuX2VuZm9yY2VGb2N1cygpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2hvd25FdmVudCA9ICQuRXZlbnQoRXZlbnQuU0hPV04sIHtcbiAgICAgICAgcmVsYXRlZFRhcmdldDogcmVsYXRlZFRhcmdldFxuICAgICAgfSk7XG5cbiAgICAgIHZhciB0cmFuc2l0aW9uQ29tcGxldGUgPSBmdW5jdGlvbiB0cmFuc2l0aW9uQ29tcGxldGUoKSB7XG4gICAgICAgIGlmIChfdGhpczMuX2NvbmZpZy5mb2N1cykge1xuICAgICAgICAgIF90aGlzMy5fZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3RoaXMzLl9pc1RyYW5zaXRpb25pbmcgPSBmYWxzZTtcbiAgICAgICAgJChfdGhpczMuX2VsZW1lbnQpLnRyaWdnZXIoc2hvd25FdmVudCk7XG4gICAgICB9O1xuXG4gICAgICBpZiAodHJhbnNpdGlvbikge1xuICAgICAgICAkKHRoaXMuX2RpYWxvZykub25lKFV0aWwuVFJBTlNJVElPTl9FTkQsIHRyYW5zaXRpb25Db21wbGV0ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uQ29tcGxldGUoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9lbmZvcmNlRm9jdXMgPSBmdW5jdGlvbiBfZW5mb3JjZUZvY3VzKCkge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgICQoZG9jdW1lbnQpLm9mZihFdmVudC5GT0NVU0lOKSAvLyBHdWFyZCBhZ2FpbnN0IGluZmluaXRlIGZvY3VzIGxvb3BcbiAgICAgIC5vbihFdmVudC5GT0NVU0lOLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgaWYgKGRvY3VtZW50ICE9PSBldmVudC50YXJnZXQgJiYgX3RoaXM0Ll9lbGVtZW50ICE9PSBldmVudC50YXJnZXQgJiYgJChfdGhpczQuX2VsZW1lbnQpLmhhcyhldmVudC50YXJnZXQpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIF90aGlzNC5fZWxlbWVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zZXRFc2NhcGVFdmVudCA9IGZ1bmN0aW9uIF9zZXRFc2NhcGVFdmVudCgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faXNTaG93biAmJiB0aGlzLl9jb25maWcua2V5Ym9hcmQpIHtcbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vbihFdmVudC5LRVlET1dOX0RJU01JU1MsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gRVNDQVBFX0tFWUNPREUpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIF90aGlzNS5oaWRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuX2lzU2hvd24pIHtcbiAgICAgICAgJCh0aGlzLl9lbGVtZW50KS5vZmYoRXZlbnQuS0VZRE9XTl9ESVNNSVNTKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zZXRSZXNpemVFdmVudCA9IGZ1bmN0aW9uIF9zZXRSZXNpemVFdmVudCgpIHtcbiAgICAgIHZhciBfdGhpczYgPSB0aGlzO1xuXG4gICAgICBpZiAodGhpcy5faXNTaG93bikge1xuICAgICAgICAkKHdpbmRvdykub24oRXZlbnQuUkVTSVpFLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICByZXR1cm4gX3RoaXM2LmhhbmRsZVVwZGF0ZShldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJCh3aW5kb3cpLm9mZihFdmVudC5SRVNJWkUpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX2hpZGVNb2RhbCA9IGZ1bmN0aW9uIF9oaWRlTW9kYWwoKSB7XG4gICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICB0aGlzLl9lbGVtZW50LnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCB0cnVlKTtcblxuICAgICAgdGhpcy5faXNUcmFuc2l0aW9uaW5nID0gZmFsc2U7XG5cbiAgICAgIHRoaXMuX3Nob3dCYWNrZHJvcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoQ2xhc3NOYW1lLk9QRU4pO1xuXG4gICAgICAgIF90aGlzNy5fcmVzZXRBZGp1c3RtZW50cygpO1xuXG4gICAgICAgIF90aGlzNy5fcmVzZXRTY3JvbGxiYXIoKTtcblxuICAgICAgICAkKF90aGlzNy5fZWxlbWVudCkudHJpZ2dlcihFdmVudC5ISURERU4pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9wcm90by5fcmVtb3ZlQmFja2Ryb3AgPSBmdW5jdGlvbiBfcmVtb3ZlQmFja2Ryb3AoKSB7XG4gICAgICBpZiAodGhpcy5fYmFja2Ryb3ApIHtcbiAgICAgICAgJCh0aGlzLl9iYWNrZHJvcCkucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuX2JhY2tkcm9wID0gbnVsbDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zaG93QmFja2Ryb3AgPSBmdW5jdGlvbiBfc2hvd0JhY2tkcm9wKGNhbGxiYWNrKSB7XG4gICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgdmFyIGFuaW1hdGUgPSAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSA/IENsYXNzTmFtZS5GQURFIDogJyc7XG5cbiAgICAgIGlmICh0aGlzLl9pc1Nob3duICYmIHRoaXMuX2NvbmZpZy5iYWNrZHJvcCkge1xuICAgICAgICB2YXIgZG9BbmltYXRlID0gVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiBhbmltYXRlO1xuICAgICAgICB0aGlzLl9iYWNrZHJvcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLl9iYWNrZHJvcC5jbGFzc05hbWUgPSBDbGFzc05hbWUuQkFDS0RST1A7XG5cbiAgICAgICAgaWYgKGFuaW1hdGUpIHtcbiAgICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhhbmltYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGhpcy5fYmFja2Ryb3ApLmFwcGVuZFRvKGRvY3VtZW50LmJvZHkpO1xuICAgICAgICAkKHRoaXMuX2VsZW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RJU01JU1MsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgIGlmIChfdGhpczguX2lnbm9yZUJhY2tkcm9wQ2xpY2spIHtcbiAgICAgICAgICAgIF90aGlzOC5faWdub3JlQmFja2Ryb3BDbGljayA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChldmVudC50YXJnZXQgIT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoX3RoaXM4Ll9jb25maWcuYmFja2Ryb3AgPT09ICdzdGF0aWMnKSB7XG4gICAgICAgICAgICBfdGhpczguX2VsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoaXM4LmhpZGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChkb0FuaW1hdGUpIHtcbiAgICAgICAgICBVdGlsLnJlZmxvdyh0aGlzLl9iYWNrZHJvcCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5hZGRDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG5cbiAgICAgICAgaWYgKCFjYWxsYmFjaykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghZG9BbmltYXRlKSB7XG4gICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5vbmUoVXRpbC5UUkFOU0lUSU9OX0VORCwgY2FsbGJhY2spLmVtdWxhdGVUcmFuc2l0aW9uRW5kKEJBQ0tEUk9QX1RSQU5TSVRJT05fRFVSQVRJT04pO1xuICAgICAgfSBlbHNlIGlmICghdGhpcy5faXNTaG93biAmJiB0aGlzLl9iYWNrZHJvcCkge1xuICAgICAgICAkKHRoaXMuX2JhY2tkcm9wKS5yZW1vdmVDbGFzcyhDbGFzc05hbWUuU0hPVyk7XG5cbiAgICAgICAgdmFyIGNhbGxiYWNrUmVtb3ZlID0gZnVuY3Rpb24gY2FsbGJhY2tSZW1vdmUoKSB7XG4gICAgICAgICAgX3RoaXM4Ll9yZW1vdmVCYWNrZHJvcCgpO1xuXG4gICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoVXRpbC5zdXBwb3J0c1RyYW5zaXRpb25FbmQoKSAmJiAkKHRoaXMuX2VsZW1lbnQpLmhhc0NsYXNzKENsYXNzTmFtZS5GQURFKSkge1xuICAgICAgICAgICQodGhpcy5fYmFja2Ryb3ApLm9uZShVdGlsLlRSQU5TSVRJT05fRU5ELCBjYWxsYmFja1JlbW92ZSkuZW11bGF0ZVRyYW5zaXRpb25FbmQoQkFDS0RST1BfVFJBTlNJVElPTl9EVVJBVElPTik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2tSZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChjYWxsYmFjaykge1xuICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgfVxuICAgIH07IC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyB0aGUgZm9sbG93aW5nIG1ldGhvZHMgYXJlIHVzZWQgdG8gaGFuZGxlIG92ZXJmbG93aW5nIG1vZGFsc1xuICAgIC8vIHRvZG8gKGZhdCk6IHRoZXNlIHNob3VsZCBwcm9iYWJseSBiZSByZWZhY3RvcmVkIG91dCBvZiBtb2RhbC5qc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4gICAgX3Byb3RvLl9hZGp1c3REaWFsb2cgPSBmdW5jdGlvbiBfYWRqdXN0RGlhbG9nKCkge1xuICAgICAgdmFyIGlzTW9kYWxPdmVyZmxvd2luZyA9IHRoaXMuX2VsZW1lbnQuc2Nyb2xsSGVpZ2h0ID4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcblxuICAgICAgaWYgKCF0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyAmJiBpc01vZGFsT3ZlcmZsb3dpbmcpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHRoaXMuX3Njcm9sbGJhcldpZHRoICsgXCJweFwiO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5faXNCb2R5T3ZlcmZsb3dpbmcgJiYgIWlzTW9kYWxPdmVyZmxvd2luZykge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IHRoaXMuX3Njcm9sbGJhcldpZHRoICsgXCJweFwiO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX3Jlc2V0QWRqdXN0bWVudHMgPSBmdW5jdGlvbiBfcmVzZXRBZGp1c3RtZW50cygpIHtcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSAnJztcbiAgICAgIHRoaXMuX2VsZW1lbnQuc3R5bGUucGFkZGluZ1JpZ2h0ID0gJyc7XG4gICAgfTtcblxuICAgIF9wcm90by5fY2hlY2tTY3JvbGxiYXIgPSBmdW5jdGlvbiBfY2hlY2tTY3JvbGxiYXIoKSB7XG4gICAgICB2YXIgcmVjdCA9IGRvY3VtZW50LmJvZHkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB0aGlzLl9pc0JvZHlPdmVyZmxvd2luZyA9IHJlY3QubGVmdCArIHJlY3QucmlnaHQgPCB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgIHRoaXMuX3Njcm9sbGJhcldpZHRoID0gdGhpcy5fZ2V0U2Nyb2xsYmFyV2lkdGgoKTtcbiAgICB9O1xuXG4gICAgX3Byb3RvLl9zZXRTY3JvbGxiYXIgPSBmdW5jdGlvbiBfc2V0U2Nyb2xsYmFyKCkge1xuICAgICAgdmFyIF90aGlzOSA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9pc0JvZHlPdmVyZmxvd2luZykge1xuICAgICAgICAvLyBOb3RlOiBET01Ob2RlLnN0eWxlLnBhZGRpbmdSaWdodCByZXR1cm5zIHRoZSBhY3R1YWwgdmFsdWUgb3IgJycgaWYgbm90IHNldFxuICAgICAgICAvLyAgIHdoaWxlICQoRE9NTm9kZSkuY3NzKCdwYWRkaW5nLXJpZ2h0JykgcmV0dXJucyB0aGUgY2FsY3VsYXRlZCB2YWx1ZSBvciAwIGlmIG5vdCBzZXRcbiAgICAgICAgLy8gQWRqdXN0IGZpeGVkIGNvbnRlbnQgcGFkZGluZ1xuICAgICAgICAkKFNlbGVjdG9yLkZJWEVEX0NPTlRFTlQpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KSB7XG4gICAgICAgICAgdmFyIGFjdHVhbFBhZGRpbmcgPSAkKGVsZW1lbnQpWzBdLnN0eWxlLnBhZGRpbmdSaWdodDtcbiAgICAgICAgICB2YXIgY2FsY3VsYXRlZFBhZGRpbmcgPSAkKGVsZW1lbnQpLmNzcygncGFkZGluZy1yaWdodCcpO1xuICAgICAgICAgICQoZWxlbWVudCkuZGF0YSgncGFkZGluZy1yaWdodCcsIGFjdHVhbFBhZGRpbmcpLmNzcygncGFkZGluZy1yaWdodCcsIHBhcnNlRmxvYXQoY2FsY3VsYXRlZFBhZGRpbmcpICsgX3RoaXM5Ll9zY3JvbGxiYXJXaWR0aCArIFwicHhcIik7XG4gICAgICAgIH0pOyAvLyBBZGp1c3Qgc3RpY2t5IGNvbnRlbnQgbWFyZ2luXG5cbiAgICAgICAgJChTZWxlY3Rvci5TVElDS1lfQ09OVEVOVCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgYWN0dWFsTWFyZ2luID0gJChlbGVtZW50KVswXS5zdHlsZS5tYXJnaW5SaWdodDtcbiAgICAgICAgICB2YXIgY2FsY3VsYXRlZE1hcmdpbiA9ICQoZWxlbWVudCkuY3NzKCdtYXJnaW4tcmlnaHQnKTtcbiAgICAgICAgICAkKGVsZW1lbnQpLmRhdGEoJ21hcmdpbi1yaWdodCcsIGFjdHVhbE1hcmdpbikuY3NzKCdtYXJnaW4tcmlnaHQnLCBwYXJzZUZsb2F0KGNhbGN1bGF0ZWRNYXJnaW4pIC0gX3RoaXM5Ll9zY3JvbGxiYXJXaWR0aCArIFwicHhcIik7XG4gICAgICAgIH0pOyAvLyBBZGp1c3QgbmF2YmFyLXRvZ2dsZXIgbWFyZ2luXG5cbiAgICAgICAgJChTZWxlY3Rvci5OQVZCQVJfVE9HR0xFUikuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgICB2YXIgYWN0dWFsTWFyZ2luID0gJChlbGVtZW50KVswXS5zdHlsZS5tYXJnaW5SaWdodDtcbiAgICAgICAgICB2YXIgY2FsY3VsYXRlZE1hcmdpbiA9ICQoZWxlbWVudCkuY3NzKCdtYXJnaW4tcmlnaHQnKTtcbiAgICAgICAgICAkKGVsZW1lbnQpLmRhdGEoJ21hcmdpbi1yaWdodCcsIGFjdHVhbE1hcmdpbikuY3NzKCdtYXJnaW4tcmlnaHQnLCBwYXJzZUZsb2F0KGNhbGN1bGF0ZWRNYXJnaW4pICsgX3RoaXM5Ll9zY3JvbGxiYXJXaWR0aCArIFwicHhcIik7XG4gICAgICAgIH0pOyAvLyBBZGp1c3QgYm9keSBwYWRkaW5nXG5cbiAgICAgICAgdmFyIGFjdHVhbFBhZGRpbmcgPSBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodDtcbiAgICAgICAgdmFyIGNhbGN1bGF0ZWRQYWRkaW5nID0gJCgnYm9keScpLmNzcygncGFkZGluZy1yaWdodCcpO1xuICAgICAgICAkKCdib2R5JykuZGF0YSgncGFkZGluZy1yaWdodCcsIGFjdHVhbFBhZGRpbmcpLmNzcygncGFkZGluZy1yaWdodCcsIHBhcnNlRmxvYXQoY2FsY3VsYXRlZFBhZGRpbmcpICsgdGhpcy5fc2Nyb2xsYmFyV2lkdGggKyBcInB4XCIpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX3Jlc2V0U2Nyb2xsYmFyID0gZnVuY3Rpb24gX3Jlc2V0U2Nyb2xsYmFyKCkge1xuICAgICAgLy8gUmVzdG9yZSBmaXhlZCBjb250ZW50IHBhZGRpbmdcbiAgICAgICQoU2VsZWN0b3IuRklYRURfQ09OVEVOVCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICAgICAgdmFyIHBhZGRpbmcgPSAkKGVsZW1lbnQpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKTtcblxuICAgICAgICBpZiAodHlwZW9mIHBhZGRpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgJChlbGVtZW50KS5jc3MoJ3BhZGRpbmctcmlnaHQnLCBwYWRkaW5nKS5yZW1vdmVEYXRhKCdwYWRkaW5nLXJpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAvLyBSZXN0b3JlIHN0aWNreSBjb250ZW50IGFuZCBuYXZiYXItdG9nZ2xlciBtYXJnaW5cblxuICAgICAgJChTZWxlY3Rvci5TVElDS1lfQ09OVEVOVCArIFwiLCBcIiArIFNlbGVjdG9yLk5BVkJBUl9UT0dHTEVSKS5lYWNoKGZ1bmN0aW9uIChpbmRleCwgZWxlbWVudCkge1xuICAgICAgICB2YXIgbWFyZ2luID0gJChlbGVtZW50KS5kYXRhKCdtYXJnaW4tcmlnaHQnKTtcblxuICAgICAgICBpZiAodHlwZW9mIG1hcmdpbiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAkKGVsZW1lbnQpLmNzcygnbWFyZ2luLXJpZ2h0JywgbWFyZ2luKS5yZW1vdmVEYXRhKCdtYXJnaW4tcmlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgfSk7IC8vIFJlc3RvcmUgYm9keSBwYWRkaW5nXG5cbiAgICAgIHZhciBwYWRkaW5nID0gJCgnYm9keScpLmRhdGEoJ3BhZGRpbmctcmlnaHQnKTtcblxuICAgICAgaWYgKHR5cGVvZiBwYWRkaW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAkKCdib2R5JykuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFkZGluZykucmVtb3ZlRGF0YSgncGFkZGluZy1yaWdodCcpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBfcHJvdG8uX2dldFNjcm9sbGJhcldpZHRoID0gZnVuY3Rpb24gX2dldFNjcm9sbGJhcldpZHRoKCkge1xuICAgICAgLy8gdGh4IGQud2Fsc2hcbiAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSBDbGFzc05hbWUuU0NST0xMQkFSX01FQVNVUkVSO1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JvbGxEaXYpO1xuICAgICAgdmFyIHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoO1xuICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpO1xuICAgICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoO1xuICAgIH07IC8vIFN0YXRpY1xuXG5cbiAgICBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlID0gZnVuY3Rpb24gX2pRdWVyeUludGVyZmFjZShjb25maWcsIHJlbGF0ZWRUYXJnZXQpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShEQVRBX0tFWSk7XG5cbiAgICAgICAgdmFyIF9jb25maWcgPSBfZXh0ZW5kcyh7fSwgTW9kYWwuRGVmYXVsdCwgJCh0aGlzKS5kYXRhKCksIHR5cGVvZiBjb25maWcgPT09ICdvYmplY3QnICYmIGNvbmZpZyk7XG5cbiAgICAgICAgaWYgKCFkYXRhKSB7XG4gICAgICAgICAgZGF0YSA9IG5ldyBNb2RhbCh0aGlzLCBfY29uZmlnKTtcbiAgICAgICAgICAkKHRoaXMpLmRhdGEoREFUQV9LRVksIGRhdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb25maWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2NvbmZpZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTm8gbWV0aG9kIG5hbWVkIFxcXCJcIiArIGNvbmZpZyArIFwiXFxcIlwiKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkYXRhW2NvbmZpZ10ocmVsYXRlZFRhcmdldCk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2NvbmZpZy5zaG93KSB7XG4gICAgICAgICAgZGF0YS5zaG93KHJlbGF0ZWRUYXJnZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgX2NyZWF0ZUNsYXNzKE1vZGFsLCBudWxsLCBbe1xuICAgICAga2V5OiBcIlZFUlNJT05cIixcbiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICByZXR1cm4gVkVSU0lPTjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiRGVmYXVsdFwiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZWZhdWx0O1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBNb2RhbDtcbiAgfSgpO1xuICAvKipcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIERhdGEgQXBpIGltcGxlbWVudGF0aW9uXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKi9cblxuXG4gICQoZG9jdW1lbnQpLm9uKEV2ZW50LkNMSUNLX0RBVEFfQVBJLCBTZWxlY3Rvci5EQVRBX1RPR0dMRSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgdmFyIHRhcmdldDtcbiAgICB2YXIgc2VsZWN0b3IgPSBVdGlsLmdldFNlbGVjdG9yRnJvbUVsZW1lbnQodGhpcyk7XG5cbiAgICBpZiAoc2VsZWN0b3IpIHtcbiAgICAgIHRhcmdldCA9ICQoc2VsZWN0b3IpWzBdO1xuICAgIH1cblxuICAgIHZhciBjb25maWcgPSAkKHRhcmdldCkuZGF0YShEQVRBX0tFWSkgPyAndG9nZ2xlJyA6IF9leHRlbmRzKHt9LCAkKHRhcmdldCkuZGF0YSgpLCAkKHRoaXMpLmRhdGEoKSk7XG5cbiAgICBpZiAodGhpcy50YWdOYW1lID09PSAnQScgfHwgdGhpcy50YWdOYW1lID09PSAnQVJFQScpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgdmFyICR0YXJnZXQgPSAkKHRhcmdldCkub25lKEV2ZW50LlNIT1csIGZ1bmN0aW9uIChzaG93RXZlbnQpIHtcbiAgICAgIGlmIChzaG93RXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkpIHtcbiAgICAgICAgLy8gT25seSByZWdpc3RlciBmb2N1cyByZXN0b3JlciBpZiBtb2RhbCB3aWxsIGFjdHVhbGx5IGdldCBzaG93blxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgICR0YXJnZXQub25lKEV2ZW50LkhJRERFTiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJChfdGhpczEwKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgIF90aGlzMTAuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlLmNhbGwoJCh0YXJnZXQpLCBjb25maWcsIHRoaXMpO1xuICB9KTtcbiAgLyoqXG4gICAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgKiBqUXVlcnlcbiAgICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqL1xuXG4gICQuZm5bTkFNRV0gPSBNb2RhbC5falF1ZXJ5SW50ZXJmYWNlO1xuICAkLmZuW05BTUVdLkNvbnN0cnVjdG9yID0gTW9kYWw7XG5cbiAgJC5mbltOQU1FXS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24gKCkge1xuICAgICQuZm5bTkFNRV0gPSBKUVVFUllfTk9fQ09ORkxJQ1Q7XG4gICAgcmV0dXJuIE1vZGFsLl9qUXVlcnlJbnRlcmZhY2U7XG4gIH07XG5cbiAgcmV0dXJuIE1vZGFsO1xufSgkKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZGFsLmpzLm1hcCJdfQ==
